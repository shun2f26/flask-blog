<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- タイトルを新規作成用に変更 -->
    <title>Flask Blog | 新規記事を作成</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN for modern icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* グローバル設定：フォントと背景 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f6;
        }
        .container {
            width: 100%;
            margin-right: auto;
            margin-left: auto;
        }
        /* Custom styling for file input to match theme */
        .file-input-custom::-webkit-file-upload-button {
            border: 0;
            padding: 0.5rem 1rem;
            border-radius: 9999px; /* rounded-full */
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            background-color: #fee2e2; /* red-100 */
            color: #b91c1c; /* red-700 */
            cursor: pointer;
            transition: background-color 0.15s;
        }
        .file-input-custom::file-selector-button {
            border: 0;
            padding: 0.5rem 1rem;
            border-radius: 9999px; /* rounded-full */
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            background-color: #fee2e2; /* red-100 */
            color: #b91c1c; /* red-700 */
            cursor: pointer;
            transition: background-color 0.15s;
        }
        .file-input-custom:hover::-webkit-file-upload-button,
        .file-input-custom:hover::file-selector-button {
            background-color: #fecaca; /* red-200 */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Navbar (ベーステンプレートから統合) -->
    <nav class="bg-white shadow-lg sticky top-0 z-10">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="#index" class="text-xl font-bold text-gray-800 hover:text-red-600 transition duration-150">
                        My Flask Blog
                    </a>
                </div>
                <!-- 認証済みユーザーのシミュレーション -->
                <div class="flex items-center space-x-4">
                    <!-- 管理者リンク (モック) -->
                    <a href="#admin" class="text-gray-600 hover:text-red-600 px-3 py-2 rounded-md text-sm font-medium flex items-center">
                        <i data-lucide="shield" class="w-4 h-4 mr-1"></i> 管理者
                    </a>
                    <!-- 新規投稿 (自分自身へのリンク) -->
                    <a href="#create" class="bg-red-600 text-white hover:bg-red-700 px-3 py-2 rounded-lg text-sm font-medium transition duration-150 flex items-center shadow-md">
                        <i data-lucide="plus-circle" class="w-4 h-4 mr-1"></i> 新規投稿
                    </a>
                    <!-- ログアウト -->
                    <a href="#logout" class="text-gray-600 hover:text-red-600 px-3 py-2 rounded-md text-sm font-medium flex items-center">
                        <i data-lucide="log-out" class="w-4 h-4 mr-1"></i> ログアウト
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Flash Messages (モックの通知メッセージを表示) -->
    <div class="container mx-auto px-4 pt-4">
        <!-- 情報メッセージのモック -->
        <div class="p-3 mb-4 rounded-lg shadow-md bg-blue-100 text-blue-800 border border-blue-300" role="alert">
            <span class="font-semibold">ヒント:</span> 新しい記事を作成し、公開するにはすべての必須フィールドに入力してください。
        </div>
    </div>

    <!-- Main Content Block - 記事新規作成フォーム -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 flex-grow">
        <div class="max-w-3xl mx-auto bg-white p-8 md:p-10 rounded-xl shadow-2xl border border-gray-100">
            <!-- 見出しを新規作成用に変更 -->
            <h1 class="text-3xl font-extrabold text-gray-900 mb-6 border-b pb-3 flex items-center">
                <i data-lucide="file-plus" class="w-7 h-7 mr-3 text-red-600"></i> 新規記事を作成
            </h1>
            
            <!-- フォームの開始 -->
            <!-- actionをcreate_submit (新規投稿) に変更 -->
            <form id="create-post-form" action="#create_submit" method="POST" enctype="multipart/form-data">
                
                <!-- タイトルフィールド -->
                <div class="mb-6">
                    <label for="title" class="block text-sm font-medium text-gray-700 mb-1">タイトル <span class="text-red-500">*</span></label>
                    <!-- 初期値は空にする -->
                    <input type="text" id="title" name="title" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm text-gray-900"
                           placeholder="記事のタイトルを入力してください">
                </div>

                <!-- コンテンツフィールド -->
                <div class="mb-6">
                    <label for="content" class="block text-sm font-medium text-gray-700 mb-1">コンテンツ <span class="text-red-500">*</span></label>
                    <!-- 初期値は空にする -->
                    <textarea id="content" name="content" rows="15" required
                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm text-gray-900"
                              placeholder="記事の本文を入力してください（HTMLも利用可能）"></textarea>
                </div>

                <!-- 画像アップロードエリア (プレビューなし) -->
                <div class="mb-6 p-4 border border-red-200 rounded-lg bg-red-50">
                    <h3 class="text-lg font-semibold text-red-700 mb-3 flex items-center">
                        <i data-lucide="image" class="w-5 h-5 mr-2"></i> サムネイル画像
                    </h3>
                    
                    <!-- 画像アップロードフィールド -->
                    <div class="mb-4">
                        <label for="image_file" class="block text-sm font-medium text-gray-700 mb-1">画像をアップロード (任意)</label>
                        <input type="file" id="image_file" name="image_file" accept="image/*" 
                               class="block w-full text-sm text-gray-500 file-input-custom">
                        <p class="mt-1 text-xs text-gray-500">JPG, PNG, GIF, 最大 5MB。</p>
                    </div>
                </div>

                <!-- フォームアクションボタン -->
                <div class="mt-8 pt-6 border-t flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4">
                    <!-- 戻るボタン -->
                    <a href="#index" id="cancel-link" class="inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition duration-150">
                        <i data-lucide="x" class="w-5 h-5 mr-2"></i> キャンセル
                    </a>
                    <!-- 投稿ボタンに変更 -->
                    <button type="submit" class="inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-md text-base font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition duration-150">
                        <i data-lucide="send" class="w-5 h-5 mr-2"></i> 記事を投稿
                    </button>
                    <!-- 編集画面特有の「削除ボタン」は削除しました -->
                </div>
            </form>
        </div>
    </main>

    <!-- Footer (ベーステンプレートから統合) -->
    <footer class="bg-gray-800 text-white py-4 mt-auto">
        <div class="container mx-auto text-center text-sm">
            &copy; 2024 Flask Blog App. All Rights Reserved.
        </div>
    </footer>

    <script>
        // Lucide Iconsの実行
        lucide.createIcons();

        // JavaScriptでフォーム送信を処理する（モック）
        document.getElementById('create-post-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            
            console.log('新規記事の作成処理を開始します...');
            console.log('タイトル:', title);
            
            // 投稿処理後、成功メッセージを表示し、トップページなどにリダイレクト（モック）
            // 🚨 注意: 実際のアプリケーションでは、alert()の代わりにカスタムモーダルを使用してください。
            alert(`新しい記事「${title.substring(0, 20)}...」が正常に投稿されました！`);
            window.location.hash = '#index'; 
            
            // 実際のFlaskアプリでは、form.validate_on_submit()後に
            // redirect(url_for('index')) などが行われます。
        });
    </script>
</body>
</html>
