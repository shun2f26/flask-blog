{% extends "base.html" %}
{% block content %}

<div class="max-w-5xl mx-auto mt-10 px-4">
    <h2 class="text-3xl font-bold mb-6 flex items-center">
        <i class="fa-solid fa-user-gear mr-2 text-blue-600"></i>
        管理者ページ
    </h2>

    <div class="mb-6">
        <a href="{{ url_for('create') }}"
           class="px-5 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700">
            新規記事を作成
        </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        {% for post in posts %}
        <div class="bg-white p-4 rounded-xl shadow-md">
            
            {% if post.image_public_id %}
                <img src="{{ post.image_url }}"
                     class="w-full h-56 object-cover rounded-md mb-3">
            {% elif post.video_public_id %}
                <img src="{{ post.video_thumb }}"
                     class="w-full h-56 object-cover rounded-md mb-3">
            {% endif %}

            <h3 class="text-xl font-bold">{{ post.title }}</h3>
            <p class="text-gray-500 text-sm">
                {{ post.created_at|datetimeformat }}
            </p>

            <div class="flex space-x-3 mt-4">
                <a href="{{ url_for('update', post_id=post.id) }}"
                   class="text-blue-600 hover:underline">
                    編集
                </a>
            
                <form action="{{ url_for('delete', post_id=post.id) }}"
                      method="POST" class="inline">
                    {{ csrf_token() }}
                    <button type="submit"
                            class="text-red-600 hover:underline"
                            onclick="return confirm('削除しますか？')">
                        削除
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}

    </div>
</div>

{% endblock %}
