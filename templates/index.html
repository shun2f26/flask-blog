{% extends "base.html" %}
{% block title %}ホーム{% endblock %}

{% block content %}

<div class="min-h-screen bg-gray-50 p-6 sm:p-10">
  <div class="max-w-6xl mx-auto">

    <!-- 見出し -->
    <h1 class="text-3xl font-extrabold text-gray-800 mb-8 flex items-center">
      <i class="fas fa-home mr-2 text-indigo-600"></i>
      最新の投稿
    </h1>

    {% if posts %}

    <!-- 投稿カードグリッド -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      {% for post in posts %}
      <a href="{{ url_for('view', post_id=post.id) }}"
         class="block bg-white rounded-2xl shadow-md hover:shadow-2xl hover:-translate-y-1 transform transition overflow-hidden">

        <!-- サムネイル -->
        {% if post.video_public_id %}
          <img src="{{ safe_img_url(post.video_public_id) }}"
               alt="動画サムネイル"
               class="w-full h-52 object-cover bg-black">

        {% elif post.image_public_id %}
          <img src="{{ safe_img_url(post.image_public_id) }}"
               alt="投稿画像"
               class="w-full h-52 object-cover">

        {% else %}
          <div class="w-full h-52 flex items-center justify-center bg-gray-200 text-gray-400">
            <i class="fas fa-image text-4xl"></i>
          </div>
        {% endif %}

        <!-- タイトル・日付 -->
        <div class="p-5">

          <h2 class="font-bold text-lg mb-2 text-gray-900 line-clamp-2">
            {{ post.title }}
          </h2>

          <p class="text-sm text-gray-500 flex items-center">
            <i class="far fa-clock mr-1"></i>
            {{ post.created_at|datetimeformat }}
          </p>

        </div>

      </a>
      {% endfor %}

    </div>

    {% else %}
      <div class="text-center text-gray-500 py-20">
        <i class="fas fa-folder-open text-4xl mb-3 text-gray-400"></i>
        <p class="text-lg">まだ投稿がありません。</p>
      </div>
    {% endif %}

  </div>
</div>

{% endblock %}
