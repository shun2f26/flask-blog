{% extends "base.html" %}
{% block content %}

<div class="max-w-5xl mx-auto mt-10 px-4">
    <h2 class="text-3xl font-bold mb-6 flex items-center">
        <i class="fa-solid fa-house mr-2 text-purple-600"></i>
        最新投稿
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        {% for post in posts %}
        <a href="{{ url_for('view', post_id=post.id) }}"
           class="block bg-white rounded-xl shadow-md hover:shadow-xl transition p-4">

            <!-- メディア（画像 or 動画サムネ） -->
            {% if post.image_public_id %}
                <img src="{{ get_safe_cloudinary_image_url(post.image_public_id) }}"
                     class="w-full h-60 object-cover rounded-md mb-4"
                     alt="サムネイル">
            {% elif post.video_public_id %}
                <img src="{{ get_safe_cloudinary_video_thumbnail(post.video_public_id) }}"
                     class="w-full h-60 object-cover rounded-md mb-4"
                     alt="動画サムネイル">
            {% endif %}

            <h3 class="text-xl font-bold">{{ post.title }}</h3>

            <p class="text-gray-500 text-sm mt-2">
                <i class="fa-regular fa-clock mr-1"></i>
                {{ post.created_at|datetimeformat }}
            </p>

        </a>
        {% endfor %}

    </div>

    <!-- ページネーション -->
    <div class="mt-8 flex justify-center space-x-3">
        {% if pagination.has_prev %}
        <a href="{{ url_for('index', page=pagination.prev_num) }}"
           class="px-4 py-2 bg-gray-300 rounded">前へ</a>
        {% endif %}

        {% if pagination.has_next %}
        <a href="{{ url_for('index', page=pagination.next_num) }}"
           class="px-4 py-2 bg-gray-300 rounded">次へ</a>
        {% endif %}
    </div>

</div>

{% endblock %}
